<!DOCTYPE html>
<html lang="en" class="">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katinat Saigon K'fé</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&family=Teko:wght@600&display=swap" rel="stylesheet">
    <style>
        /* Custom styles to match the Katinat theme */
        body {
            font-family: 'Inter', sans-serif;
            transition: background-color 0.3s;
            background-color: #fff !important; /* Force white background */
        }

        /* Define theme colors */
        :root {
            --brand-teal: #1a4a5a;
            --brand-cream: #f4f1ea;
            --brand-dark: #111827;
            --brand-light: #f9fafb;
            --brand-accent: #e57925;
        }

        /* Apply theme colors */
        .bg-brand-teal { background-color: var(--brand-teal); }
        .text-brand-teal { color: var(--brand-teal); }
        .bg-brand-cream { background-color: var(--brand-cream); }
        .text-brand-cream { color: var(--brand-cream); }
        .border-brand-accent { border-color: var(--brand-accent); }
        .bg-brand-accent { background-color: var(--brand-accent); }
        
        /* Dark mode styles */
        .dark .bg-brand-teal { background-color: #112e3a; }
        .dark .bg-brand-cream { background-color: var(--brand-dark); }
        .dark .text-brand-teal { color: var(--brand-cream); }
        .dark .prose-headings\:text-gray-800 h2 { color: var(--brand-cream); }
        .dark .prose-headings\:text-gray-800 h3 { color: var(--brand-light); }
        .dark .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.2); }
        .dark .ring-gray-200 { ring-color: #4b5563; }
        .dark .text-gray-500 { color: #d1d5db; }
        .dark .text-gray-900 { color: #f9fafb; }
        .dark .bg-white { background-color: #fff !important; }  /* Always white on dark mode */
        .dark .border-gray-200 { border-color: #4b5563; }

        /* Custom font for the logo */
        .font-logo {
            font-family: 'Teko', sans-serif;
            letter-spacing: 0.1em;
        }

        /* Modal styles */
        #productModal {
            transition: opacity 0.3s ease-in-out;
        }
        #productModal.hidden {
            opacity: 0;
        }
        
        /* Search animation */
        .product-card {
            transition: transform 0.3s, opacity 0.3s;
        }

        .product-card.hide {
            transform: scale(0.9);
            opacity: 0;
            display: none;
        }

    </style>
</head>
<body class="bg-white text-gray-800" style="background-color: #fff !important;">
    <!-- Header -->
    <header class="bg-brand-teal text-white sticky top-0 z-40 shadow-md">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-20">
                <!-- Logo -->
                <div class="flex-shrink-0">
                    <a href="#" class="text-4xl font-logo">KATINAT</a>
                </div>

                <!-- Search Bar (Centered for larger screens) -->
                <div class="hidden md:flex flex-1 justify-center px-8">
                    <div class="relative w-full max-w-lg">
                        <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                            <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"/>
                            </svg>
                        </span>
                        <input id="search-bar" type="text" placeholder="Search for your favorite drink..." class="w-full pl-10 pr-4 py-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-accent">
                    </div>
                </div>

                <!-- Dark Mode Toggle -->
                <div class="flex items-center">
                    <button id="theme-toggle" type="button" class="text-gray-200 hover:text-white rounded-lg text-sm p-2.5">
                        <svg id="theme-toggle-dark-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M17.293 13.293A8 8 0 016.707 2.707a8 8 0 1010.586 10.586z"></path></svg>
                        <svg id="theme-toggle-light-icon" class="hidden w-5 h-5" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4.22 2.22a1 1 0 011.415 0l.707.707a1 1 0 11-1.415 1.415l-.707-.707a1 1 0 010-1.415zM18 10a1 1 0 100 2h-1a1 1 0 100-2h1zm-2.22 5.78a1 1 0 010 1.415l-.707.707a1 1 0 11-1.415-1.415l.707-.707a1 1 0 011.415 0zM10 18a1 1 0 011-1v-1a1 1 0 10-2 0v1a1 1 0 011 1zm-5.78-2.22a1 1 0 000-1.415l-.707-.707a1 1 0 10-1.415 1.415l.707.707a1 1 0 001.415 0zM4 10a1 1 0 10-2 0h1a1 1 0 100-2H2zm2.22-5.78A1 1 0 014.22 2.22l.707.707A1 1 0 014.22 4.342l-.707-.707a1 1 0 010-1.415z"></path></svg>
                    </button>
                </div>
            </div>
             <!-- Search Bar (Mobile) -->
            <div class="md:hidden pb-4 px-2">
                 <div class="relative w-full">
                    <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                        <svg class="h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"/></svg>
                    </span>
                    <input id="search-bar-mobile" type="text" placeholder="Search..." class="w-full pl-10 pr-4 py-2 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-900 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-brand-accent">
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Hero Banner -->
        <div class="relative rounded-xl overflow-hidden bg-brand-teal text-white p-8 md:p-12 mb-12 flex items-center min-h-[250px] md:min-h-[300px]">
            <div class="absolute inset-0">
                <img src="https://placehold.co/1200x400/1a4a5a/f4f1ea?text=Bơ+Già+Dừa+Non" alt="Hero Banner" class="w-full h-full object-cover opacity-20">
            </div>
            <div class="relative z-10 max-w-2xl">
                <h1 class="text-4xl md:text-6xl font-extrabold mb-2">Discover The Taste of Saigon</h1>
                <p class="text-lg md:text-xl text-brand-cream opacity-90">Freshly brewed coffee, fruity teas, and signature blends crafted with passion.</p>
            </div>
        </div>

        <!-- Menu Section -->
        <div id="menu-container" class="prose-headings:text-gray-800">
            <!-- Products will be injected here by JavaScript -->
        </div>
    </main>

    <!-- Product Detail Modal -->
    <div id="productModal" class="hidden fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4">
        <div id="modalContent" class="bg-white dark:bg-gray-800 rounded-2xl shadow-2xl w-full max-w-3xl flex flex-col md:flex-row overflow-hidden transform transition-all duration-300 scale-95">
            <!-- Close button -->
            <button id="closeModal" class="absolute top-4 right-4 text-gray-400 hover:text-gray-800 dark:hover:text-white z-10">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
            </button>
            
            <!-- Modal Image -->
            <img id="modalImage" src="" alt="Product Image" class="w-full md:w-1/2 h-64 md:h-auto object-cover">
            
            <!-- Modal Details -->
            <div class="p-6 md:p-8 flex flex-col justify-between">
                <div>
                    <h2 id="modalName" class="text-3xl font-bold text-gray-900 dark:text-white mb-2"></h2>
                    <div class="relative mb-4">
                        <p id="modalDescription" class="text-gray-600 dark:text-gray-300 min-h-[60px]">A refreshing and delightful drink perfect for any time of the day. Made with the freshest ingredients.</p>
                         <div id="description-loader" class="hidden absolute inset-0 bg-white/80 dark:bg-gray-800/80 flex items-center justify-center rounded-md">
                            <svg class="animate-spin h-6 w-6 text-brand-teal" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8H4z"></path></svg>
                        </div>
                    </div>
                    <button id="ai-description-btn" class="text-sm text-brand-accent hover:underline mb-6 font-semibold">✨ Get AI Description</button>

                    <div class="space-y-4">
                        <!-- Price -->
                        <div class="flex items-baseline">
                            <span class="text-3xl font-bold text-brand-teal dark:text-brand-accent" id="modalPrice"></span>
                            <span class="text-gray-500 dark:text-gray-400 ml-1">VND</span>
                        </div>
                        
                        <!-- Size Options -->
                        <div>
                            <h3 class="text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2">Size</h3>
                            <div id="size-options-container" class="flex space-x-2">
                                <!-- Size options will be injected here -->
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Action Button -->
                <div class="mt-8">
                    <button class="w-full bg-brand-accent text-white font-bold py-3 px-6 rounded-lg hover:bg-opacity-90 transition-colors duration-300">
                        Add to Order
                    </button>
                </div>
            </div>
        </div>
    </div>
<script>
 // --- DATA ---
        const menuData = [
            {
                category: "Cà Phê Phin Mê",
                items: [
                    { name: "Mê Sữa Đá", priceL: 35000, priceS: 29000, img: "https://placehold.co/400x400/4a2c2a/ffffff?text=Mê+Sữa+Đá", defaultDescription: "The classic Vietnamese iced coffee with condensed milk, a bold and sweet favorite." },
                    { name: "Mê Đen Đá", priceL: 35000, priceS: 29000, img: "https://placehold.co/400x400/2d1b1a/ffffff?text=Mê+Đen+Đá", defaultDescription: "Strong and aromatic black Vietnamese coffee, served over ice for a powerful kick." },
                    { name: "Mê Dừa Non", priceL: 45000, img: "https://placehold.co/400x400/6e4a3a/ffffff?text=Mê+Dừa+Non", defaultDescription: "A creamy and tropical blend of coffee with young coconut." },
                    { name: "Mê Phô Mai", priceL: 55000, img: "https://placehold.co/400x400/8b5e4a/ffffff?text=Mê+Phô+Mai", defaultDescription: "A unique and savory-sweet coffee creation with a creamy cheese foam." },
                ]
            },
            {
                category: "Cà Phê Espresso",
                items: [
                    { name: "Espresso Đen Đá", priceL: 45000, priceS: 32000, img: "https://placehold.co/400x400/3b2b29/ffffff?text=Espresso", defaultDescription: "A classic shot of rich espresso served over ice." },
                    { name: "Sô-cô-la Katinat", priceL: 55000, img: "https://placehold.co/400x400/5d3a33/ffffff?text=Sô-cô-la", defaultDescription: "Rich and decadent chocolate, Katinat's signature style." },
                    { name: "Cà Phê Latte Hạt Phỉ", priceL: 55000, img: "https://placehold.co/400x400/a37b67/ffffff?text=Latte+Hạt+Phỉ", defaultDescription: "A smooth latte infused with the nutty flavor of hazelnut." },
                    { name: "Cà Phê Latte Hạnh Nhân", priceL: 55000, img: "https://placehold.co/400x400/b08a74/ffffff?text=Latte+Hạnh+Nhân", defaultDescription: "A creamy latte with the delicate taste of almond." },
                    { name: "Latte", priceL: 55000, img: "https://placehold.co/400x400/c4a18d/ffffff?text=Latte", defaultDescription: "A perfect balance of espresso and steamed milk." },
                ]
            },
            {
                category: "Ice Blended",
                items: [
                    { name: "Caramel Đá Xay", priceL: 55000, img: "https://placehold.co/400x400/a97c50/ffffff?text=Caramel+Đá+Xay", defaultDescription: "A sweet and frosty treat with rich caramel flavor." },
                    { name: "Bánh Oréo Sô-cô-la Đá Xay", priceL: 55000, img: "https://placehold.co/400x400/4a3b34/ffffff?text=Oreo+Đá+Xay", defaultDescription: "Cookies and cream meet chocolate in this irresistible blended drink." },
                    { name: "Cà Phê Hạt Phỉ Đá Xay", priceL: 55000, img: "https://placehold.co/400x400/7a5b4f/ffffff?text=Hạt+Phỉ+Đá+Xay", defaultDescription: "A nutty and caffeinated blended coffee with hazelnut." },
                    { name: "Cà Phê Hạnh Nhân Đá Xay", priceL: 55000, img: "https://placehold.co/400x400/9b7a6b/ffffff?text=Hạnh+Nhân+Đá+Xay", defaultDescription: "A cool and creamy blended coffee with a hint of almond." },
                    { name: "Sữa Chua Dâu", priceL: 55000, img: "https://placehold.co/400x400/c83f4f/ffffff?text=Sữa+Chua+Dâu", defaultDescription: "A refreshing blend of tangy yogurt and sweet strawberries." },
                    { name: "Sữa Chua Việt Quất", priceL: 60000, img: "https://placehold.co/400x400/6a4c9c/ffffff?text=Sữa+Chua+Việt+Quất", defaultDescription: "A delightful mix of yogurt and antioxidant-rich blueberries." },
                ]
            },
            {
                category: "Trà Trái Cây",
                items: [
                    { name: "Trà Đào Hồng Đài", priceL: 65000, img: "https://placehold.co/400x400/e57925/ffffff?text=Trà+Đào", defaultDescription: "A fragrant and fruity tea with sweet peaches and hibiscus." },
                    { name: "Trà Oolong Tứ Quý", priceL: 55000, img: "https://placehold.co/400x400/f4a261/ffffff?text=Trà+Oolong", defaultDescription: "A premium Oolong tea with a smooth, floral aroma." },
                    { name: "Trà Cam Quế", priceL: 55000, img: "https://placehold.co/400x400/d9534f/ffffff?text=Trà+Cam+Quế", defaultDescription: "A warming and aromatic tea with orange and cinnamon." },
                ]
            },
            {
                category: "Trà Sữa",
                items: [
                    { name: "Trà Sữa Chôm Chôm", priceL: 65000, img: "https://placehold.co/400x400/d4a373/ffffff?text=Trà+Sữa+Chôm+Chôm", defaultDescription: "A unique milk tea featuring the sweet, exotic flavor of rambutan." },
                    { name: "Trà Oolong Trái Dâu", priceL: 65000, img: "https://placehold.co/400x400/e63946/ffffff?text=Trà+Sữa+Dâu", defaultDescription: "Creamy Oolong milk tea blended with sweet strawberries." },
                    { name: "Trà Sữa Oolong Nướng", priceL: 55000, img: "https://placehold.co/400x400/a67c52/ffffff?text=Trà+Sữa+Oolong", defaultDescription: "A roasted Oolong milk tea with a deep, comforting flavor." },
                ]
            }
        ];

        // --- DOM ELEMENTS ---
        const menuContainer = document.getElementById('menu-container');
        const modal = document.getElementById('productModal');
        const modalContent = document.getElementById('modalContent');
        const closeModalBtn = document.getElementById('closeModal');
        const searchBar = document.getElementById('search-bar');
        const searchBarMobile = document.getElementById('search-bar-mobile');
        const sizeOptionsContainer = document.getElementById('size-options-container');
        const modalPriceEl = document.getElementById('modalPrice');
        const modalDescriptionEl = document.getElementById('modalDescription');
        const descriptionLoader = document.getElementById('description-loader');
        const aiDescriptionBtn = document.getElementById('ai-description-btn');

        let currentItem = {};

        // --- FUNCTIONS ---

        /**
         * Formats a number as Vietnamese Dong currency.
         */
        function formatCurrency(number) {
            return number ? number.toLocaleString('it-IT') : '';
        }

        /**
         * Renders the entire menu from the menuData object.
         */
        function renderMenu() {
            let content = '';
            menuData.forEach(category => {
                content += `
                    <div class="mb-12">
                        <h2 class="text-3xl font-bold mb-6 border-l-4 border-brand-accent pl-4 dark:text-white">${category.category}</h2>
                        <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
                `;
                category.items.forEach(item => {
                    content += `
                        <div class="product-card group cursor-pointer" data-item='${JSON.stringify(item)}'>
                            <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden transition-transform duration-300 group-hover:scale-105">
                                <img src="${item.img}" alt="${item.name}" class="w-full h-40 sm:h-48 object-cover">
                                <div class="p-4">
                                    <h3 class="font-semibold text-md md:text-lg text-gray-900 dark:text-white truncate">${item.name}</h3>
                                    <p class="text-brand-teal dark:text-brand-accent font-bold mt-1">${formatCurrency(item.priceL)} VND</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
                content += `</div></div>`;
            });
            menuContainer.innerHTML = content;
            addProductCardListeners();
        }

        /**
         * Opens the product detail modal with specific item data.
         */
        function openModal(item) {
            currentItem = item;
            document.getElementById('modalName').textContent = item.name;
            document.getElementById('modalImage').src = item.img;
            document.getElementById('modalImage').alt = item.name;
            modalDescriptionEl.textContent = item.defaultDescription || "A delicious beverage from Katinat.";
            
            updateSizeOptions();
            
            modal.classList.remove('hidden');
            setTimeout(() => modalContent.classList.remove('scale-95'), 10);
        }

        /**
         * Updates the size options and price in the modal.
         */
        function updateSizeOptions() {
            sizeOptionsContainer.innerHTML = '';

            if (currentItem.priceS) {
                const buttonS = document.createElement('button');
                buttonS.textContent = 'S';
                buttonS.dataset.price = currentItem.priceS;
                buttonS.classList.add('size-option', 'px-4', 'py-2', 'rounded-lg', 'text-sm', 'border');
                sizeOptionsContainer.appendChild(buttonS);
            }
            
            if (currentItem.priceL) {
                const buttonL = document.createElement('button');
                buttonL.textContent = 'L';
                buttonL.dataset.price = currentItem.priceL;
                buttonL.classList.add('size-option', 'px-4', 'py-2', 'rounded-lg', 'text-sm', 'border');
                sizeOptionsContainer.appendChild(buttonL);
            }

            const sizeButtons = sizeOptionsContainer.querySelectorAll('.size-option');
            
            sizeButtons.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    sizeButtons.forEach(b => {
                        b.classList.remove('bg-brand-teal', 'text-white', 'border-brand-accent');
                        b.classList.add('border-gray-300', 'dark:border-gray-600', 'text-gray-700', 'dark:text-gray-300');
                    });
                    e.target.classList.add('bg-brand-teal', 'text-white', 'border-brand-accent');
                    e.target.classList.remove('border-gray-300', 'dark:border-gray-600', 'text-gray-700', 'dark:text-gray-300');
                    modalPriceEl.textContent = formatCurrency(parseInt(e.target.dataset.price));
                });
            });

            if(sizeButtons.length > 0) {
                sizeButtons[sizeButtons.length - 1].click();
            } else {
                 modalPriceEl.textContent = '';
            }
        }

        /**
         * Closes the product detail modal.
         */
        function closeModal() {
            modalContent.classList.add('scale-95');
            setTimeout(() => modal.classList.add('hidden'), 300);
        }

        /**
         * Adds click event listeners to all product cards.
         */
        function addProductCardListeners() {
            document.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', () => {
                    const itemData = JSON.parse(card.dataset.item);
                    openModal(itemData);
                });
            });
        }
        
        /**
         * Filters menu items based on search input.
         */
        function filterMenu(query) {
            const normalizedQuery = query.toLowerCase().trim();
            document.querySelectorAll('.product-card').forEach(card => {
                const itemData = JSON.parse(card.dataset.item);
                const name = itemData.name.toLowerCase();
                if (name.includes(normalizedQuery)) {
                    card.classList.remove('hide');
                } else {
                    card.classList.add('hide');
                }
            });
        }

        /**
         * Calls the Gemini API to generate a description.
         */
        async function getAIDescription() {
            const drinkName = currentItem.name;
            if (!drinkName) return;

            descriptionLoader.classList.remove('hidden');
            modalDescriptionEl.textContent = 'Generating...';

            const prompt = `Generate a short, fun, and enticing marketing description for a Vietnamese cafe drink called '${drinkName}'. Keep it to 1-2 sentences. Be creative and appealing.`;
            
            try {
                const generatedText = await callGeminiAPI(prompt);
                modalDescriptionEl.textContent = generatedText;
            } catch (error) {
                console.error("Gemini API call failed:", error);
                modalDescriptionEl.textContent = 'Could not generate a description. Please try again.';
            } finally {
                descriptionLoader.classList.add('hidden');
            }
        }

        /**
         * Fetches data from the Gemini API with exponential backoff.
         */
        async function callGeminiAPI(prompt) {
            const apiKey = ""; // API key will be injected by the environment
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;
            
            const payload = {
                contents: [{ role: "user", parts: [{ text: prompt }] }]
            };

            let response;
            let delay = 1000;
            for (let i = 0; i < 5; i++) { // Retry up to 5 times
                try {
                    response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });

                    if (response.ok) {
                        const result = await response.json();
                        if (result.candidates && result.candidates[0]?.content?.parts[0]?.text) {
                            return result.candidates[0].content.parts[0].text;
                        } else {
                           throw new Error("Invalid response structure from Gemini API");
                        }
                    } else if (response.status === 429) { // Handle throttling
                        await new Promise(resolve => setTimeout(resolve, delay));
                        delay *= 2;
                    } else {
                        throw new Error(`API request failed with status ${response.status}`);
                    }
                } catch (error) {
                    if (i === 4) throw error;
                    await new Promise(resolve => setTimeout(resolve, delay));
                    delay *= 2;
                }
            }
            throw new Error("Gemini API call failed after multiple retries.");
        }


        // --- EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => {
            renderMenu();

            closeModalBtn.addEventListener('click', closeModal);
            modal.addEventListener('click', (e) => {
                if (e.target === modal) {
                    closeModal();
                }
            });
            document.addEventListener('keydown', (e) => {
                if (e.key === "Escape" && !modal.classList.contains('hidden')) {
                    closeModal();
                }
            });

            searchBar.addEventListener('input', (e) => filterMenu(e.target.value));
            searchBarMobile.addEventListener('input', (e) => filterMenu(e.target.value));
            aiDescriptionBtn.addEventListener('click', getAIDescription);
        });


        // --- DARK MODE TOGGLE ---
        const themeToggleBtn = document.getElementById('theme-toggle');
        const themeToggleDarkIcon = document.getElementById('theme-toggle-dark-icon');
        const themeToggleLightIcon = document.getElementById('theme-toggle-light-icon');

        if (localStorage.getItem('color-theme') === 'dark' || (!('color-theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
            themeToggleLightIcon.classList.remove('hidden');
        } else {
            document.documentElement.classList.remove('dark');
            themeToggleDarkIcon.classList.remove('hidden');
        }

        themeToggleBtn.addEventListener('click', function() {
            themeToggleDarkIcon.classList.toggle('hidden');
            themeToggleLightIcon.classList.toggle('hidden');

            if (localStorage.getItem('color-theme')) {
                if (localStorage.getItem('color-theme') === 'light') {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                } else {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                }
            } else {
                if (document.documentElement.classList.contains('dark')) {
                    document.documentElement.classList.remove('dark');
                    localStorage.setItem('color-theme', 'light');
                } else {
                    document.documentElement.classList.add('dark');
                    localStorage.setItem('color-theme', 'dark');
                }
            }
        });

    </script>
    <!-- Filum Chat SDK -->
    <script type="text/javascript" src="https://filum-assets.s3.ap-southeast-1.amazonaws.com/dist/filum_chat_dev.umd.js"/>

    <script>
      // Initialize the chat with your organization ID
      ;(async function () {
        await window.filumChat.initialize({
          organizationId: '8706c5ac-c255-43ea-bf01-58d238e8c086',
          installedSourceId: 3794,
          hideLauncherButton: false
        })

        // Show the chat button
        window.filumChat.show()
        })()
    </script>
</body>
</html>
